machine:
  timezone:
    America/New_York
  node:
    version: 8.1.0
  test:
    override:
      - echo "done"  
  dependencies:
   pre:
    - curl -v -L -o cf-cli_amd64.deb 'https://cli.run.pivotal.io/stable?release=debian64&source=github'
    - sudo dpkg -i cf-cli_amd64.deb
    - cf -v
deployment:
  # development:
  #   branch: development
  #   commands:
  #     - cd /home/ubuntu/voyager/pioneer && npm install && npm test
  #     - cd /home/ubuntu/voyager/frontier && npm install
  #     - cf target -o searchbookgo -s development
  #     - cf push ezwaves-pioneer-dev -p ./pioneer -b https://github.com/cloudfoundry/nodejs-buildpack.git#v1.5.26
  #     - cd /home/ubuntu/voyager/frontier && REACT_APP_ENV=staging npm run build
  #     - now ./frontier/build --token $NOW_CLI_TOKEN --alias staging.searchbookgo.com
  production:
    branch: master
    commands:
      - cd /home/ubuntu/prajna && npm install && npm list --depth=0
      - now . --token $NOW_CLI_TOKEN -e DB=$DB_URL -e SID=$TWILIO_SID -e TOKEN=$TWILIO_TOKEN -e DEV=false --alias prajna.now.sh

